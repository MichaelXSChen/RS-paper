% Remember to use the lgrind style

\Head{}
\File{example.cpp.lineno}{2016}{5}{8}{22:11}{829}
\index{main}\Proc{main}\L{\LB{\N{1}_\V{:}_\K{void}_\V{main}(\K{int}_\V{argc},_\K{char}_*\V{argv}[\,])_\{}}
\L{\LB{\N{2}_\V{:}}\Tab{6}{\K{int}_\V{nfds}_=_\N{0};}}
\L{\LB{\N{3}_\V{:}}\Tab{6}{\K{struct}_\V{pollfd}_\V{fds}[\V{MAX}];}}
\L{\LB{\N{4}_\V{:}}\Tab{6}{\K{int}_\V{sock}_=_\V{socket}(.\,.\,.);}}
\L{\LB{\N{5}_\V{:}}\Tab{6}{\V{fds}[\V{nfds}].\V{fd}_=_\V{sock};}}
\L{\LB{\N{6}_\V{:}}\Tab{6}{\V{fds}[\V{nfds}].\V{events}_=_\V{POLLIN};}}
\L{\LB{\N{7}_\V{:}}\Tab{6}{\V{nfds}++;}}
\L{\LB{\N{8}_\V{:}}\Tab{6}{.\,.\,.;_\C{}//_Call_bind()_and_listen().\CE{}}}
\L{\LB{\N{9}_\V{:}}\Tab{6}{\K{while}_(\V{poll}(\V{fds},_\V{nfds},_\N{0})_\>_\N{0})_\{}}
\L{\LB{\N{10}\V{:}}\Tab{8}{\K{for}_(\K{int}_\V{i}=\N{0};_\V{i}\<\V{MAX};_\V{i}++)_\{}}
\L{\LB{\N{11}\V{:}}\Tab{10}{\K{if}(\V{fds}[\V{i}].\V{revents}_==_\V{POLLIN})_\{}}
\L{\LB{\N{12}\V{:}}\Tab{12}{\K{if}_(\V{fds}[\V{i}].\V{fd}_==_\V{sock})_\{}}
\L{\LB{\N{13}\V{:}}\Tab{14}{\V{fds}[\V{nfds}].\V{fd}_=_\V{accept}(\V{sock},_.\,.\,.);}}
\L{\LB{\N{14}\V{:}}\Tab{14}{\V{fds}[\V{nfds}].\V{events}_=_\V{POLLIN};}}
\L{\LB{\N{15}\V{:}}\Tab{14}{\V{nfds}++;}}
\L{\LB{\N{16}\V{:}}\Tab{12}{\}_\K{else}_\{}}
\L{\LB{\N{17}\V{:}}\Tab{14}{\K{char}_\V{in}[\N{1024}],_\V{out}[\N{1024}];}}
\L{\LB{\N{18}\V{:}}\Tab{14}{\V{recv}(\V{fds}[\V{i}].\V{fd},_\V{in},_.\,.\,.);}}
\L{\LB{\N{19}\V{:}}\Tab{14}{\V{process\_request}(\V{in},_\V{out});}}
\L{\LB{\N{20}\V{:}}\Tab{14}{\V{send}(\V{fds}[\V{i}].\V{fd},_\V{out},_.\,.\,.);}}
\L{\LB{\N{21}\V{:}}\Tab{14}{\V{close}(\V{fds}[\V{i}].\V{fd});}}
\L{\LB{\N{22}\V{:}}\Tab{14}{\V{fds}[\V{i}].\V{fd}_=_\V{fds}[\V{i}].\V{events}_=_\N{0};}}
\L{\LB{\N{23}\V{:}}\Tab{14}{\V{nfds}\-\-;}}
\L{\LB{\N{24}\V{:}}\Tab{12}{\}}}
\L{\LB{\N{25}\V{:}}\Tab{10}{\}}}
\L{\LB{\N{26}\V{:}}\Tab{8}{\}}}
\L{\LB{\N{27}\V{:}}\Tab{6}{\}}}
\L{\LB{\N{28}\V{:}_\}}}
